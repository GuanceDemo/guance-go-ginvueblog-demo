import{r as h,k as p,p as z,o as F,c as I,w as i,a as r,b as k,u as e,N as d,j as S,q as B,d as _,v as s,x as L,y}from"./index-f53dfd2d.js";import{_ as D}from"./CommonPage-328ed173.js";import{_ as R}from"./QueryBarItem-a7adc33b.js";import{_ as V}from"./CrudModal-8441a1a6.js";import{_ as O}from"./CrudTable-e7ebf5b4.js";import{u as P}from"./useCRUD-6648f9c7.js";import{N as u}from"./Input-d1b207b8.js";import{N as j,a as f}from"./FormItem-9890d329.js";import{N as K}from"./Image-3871d8d9.js";import{N as T}from"./Popconfirm-7d90b5a9.js";import"./AppPage-64321f57.js";import"./Space-fc8792cb.js";import"./RadioGroup-373382a0.js";import"./get-slot-1efb97e5.js";import"./Checkbox-23248bff.js";import"./Forward-fc22679e.js";import"./utils-faaa8f65.js";const A=_("span",{class:"i-material-symbols:add mr-5 text-18"},null,-1),E=_("span",{class:"i-material-symbols:playlist-remove mr-5 text-18"},null,-1),de=Object.assign({name:"友链管理"},{__name:"index",setup(M){const n=h(null),m=h({}),{modalVisible:v,modalTitle:w,modalLoading:x,handleAdd:N,handleDelete:c,handleEdit:U,handleSave:q,modalForm:o,modalFormRef:C}=P({name:"友链",initForm:{},doCreate:p.saveOrUpdateLink,doDelete:p.deleteLinks,doUpdate:p.saveOrUpdateLink,refresh:()=>{var l;return(l=n.value)==null?void 0:l.handleSearch()}});z(()=>{var l;(l=n.value)==null||l.handleSearch()});const $=[{type:"selection",width:15,fixed:"left"},{title:"头像",key:"avatar",width:50,align:"center",render(l){return s(K,{height:50,imgProps:{style:{"border-radius":"3px"}},src:l.avatar,"fallback-src":"http://dummyimage.com/400x400","show-toolbar-tooltip":!0})}},{title:"链接名",key:"name",width:100,align:"center",ellipsis:{tooltip:!0}},{title:"链接地址",key:"address",width:120,align:"center",ellipsis:{tooltip:!0},render(l){return s("a",{style:"cursor: pointer",onClick:()=>{const{copy:t}=useClipboard();t(l.address),$message.info("复制到剪切板!")}},l.address)}},{title:"链接介绍",key:"intro",width:120,align:"center",ellipsis:{tooltip:!0}},{title:"创建日期",key:"created_at",width:80,align:"center",render(l){return s(d,{size:"small",type:"text",ghost:!0},{default:()=>L(l.created_at),icon:y("mdi:clock-time-three-outline",{size:17})})}},{title:"操作",key:"actions",width:100,align:"center",fixed:"right",render(l){return[s(d,{size:"small",type:"primary",onClick:()=>U(l)},{default:()=>"编辑",icon:y("material-symbols:edit-outline",{size:16})}),s(T,{onPositiveClick:()=>c([l.id],!1)},{trigger:()=>s(d,{size:"small",type:"error",style:"margin-left: 15px;"},{default:()=>"删除",icon:y("material-symbols:delete-outline",{size:16})}),default:()=>s("div",{},"确定删除该分类吗?")})]}}];return(l,t)=>(F(),I(D,{"show-footer":"",title:"友链管理"},{action:i(()=>{var a;return[r(e(d),{type:"primary",onClick:e(N)},{default:i(()=>[A,k(" 新建友链 ")]),_:1},8,["onClick"]),r(e(d),{"ml-20":"",type:"error",disabled:!((a=n.value)!=null&&a.selections.length),onClick:t[0]||(t[0]=g=>{var b;return e(c)((b=n.value)==null?void 0:b.selections)})},{default:i(()=>[E,k(" 批量删除 ")]),_:1},8,["disabled"])]}),default:i(()=>[r(O,{ref_key:"$table",ref:n,"query-items":m.value,"onUpdate:queryItems":t[3]||(t[3]=a=>m.value=a),columns:$,"get-data":e(p).getLinks},{queryBar:i(()=>[r(R,{label:"友链名","label-width":50},{default:i(()=>[r(e(u),{value:m.value.keyword,"onUpdate:value":t[1]||(t[1]=a=>m.value.keyword=a),clearable:"",type:"text",placeholder:"请输入友链名",onKeydown:t[2]||(t[2]=S(a=>{var g;return(g=n.value)==null?void 0:g.handleSearch()},["enter"]))},null,8,["value"])]),_:1})]),_:1},8,["query-items","get-data"]),r(V,{visible:e(v),"onUpdate:visible":t[8]||(t[8]=a=>B(v)?v.value=a:null),title:e(w),loading:e(x),onSave:e(q)},{default:i(()=>[r(e(j),{ref_key:"modalFormRef",ref:C,"label-placement":"left","label-align":"left","label-width":80,model:e(o)},{default:i(()=>[r(e(f),{label:"链接名",path:"name",rule:{required:!0,message:"请输入友链名称",trigger:["input","blur"]}},{default:i(()=>[r(e(u),{value:e(o).name,"onUpdate:value":t[4]||(t[4]=a=>e(o).name=a),placeholder:"请输入友链名称"},null,8,["value"])]),_:1}),r(e(f),{label:"链接头像",path:"avatar",rule:{required:!0,message:"请输入友链头像",trigger:["input","blur"]}},{default:i(()=>[r(e(u),{value:e(o).avatar,"onUpdate:value":t[5]||(t[5]=a=>e(o).avatar=a),placeholder:"请输入链接头像"},null,8,["value"])]),_:1}),r(e(f),{label:"链接地址",path:"address",rule:{required:!0,message:"请输入友链地址",trigger:["input","blur"]}},{default:i(()=>[r(e(u),{value:e(o).address,"onUpdate:value":t[6]||(t[6]=a=>e(o).address=a),placeholder:"请输入链接地址"},null,8,["value"])]),_:1}),r(e(f),{label:"链接介绍",path:"intro",rule:{required:!0,message:"请输入友链介绍",trigger:["input","blur"]}},{default:i(()=>[r(e(u),{value:e(o).intro,"onUpdate:value":t[7]||(t[7]=a=>e(o).intro=a),placeholder:"请输入友链地址"},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["visible","title","loading","onSave"])]),_:1}))}});export{de as default};
