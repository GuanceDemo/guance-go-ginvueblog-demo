import{r as b,p as q,k as p,o as F,c as S,w as r,a as i,b as v,u as e,N as s,j as B,q as I,d as _,v as n,x as h,y as f}from"./index-f53dfd2d.js";import{_ as D}from"./CommonPage-328ed173.js";import{_ as R}from"./QueryBarItem-a7adc33b.js";import{_ as V}from"./CrudModal-8441a1a6.js";import{_ as O}from"./CrudTable-e7ebf5b4.js";import{u as j}from"./useCRUD-6648f9c7.js";import{N as k}from"./Input-d1b207b8.js";import{N as E,a as K}from"./FormItem-9890d329.js";import{N as P}from"./Popconfirm-7d90b5a9.js";import"./AppPage-64321f57.js";import"./Space-fc8792cb.js";import"./RadioGroup-373382a0.js";import"./get-slot-1efb97e5.js";import"./Checkbox-23248bff.js";import"./Forward-fc22679e.js";const T=_("span",{class:"i-mdi:download mr-5 text-18"},null,-1),A=_("span",{class:"i-material-symbols:add mr-5 text-18"},null,-1),L=_("span",{class:"i-material-symbols:playlist-remove mr-5 text-18"},null,-1),se=Object.assign({name:"分类管理"},{__name:"index",setup(M){const o=b(null),m=b({});q(()=>{var a;(a=o.value)==null||a.handleSearch()});const{modalVisible:y,modalTitle:x,modalLoading:w,handleAdd:C,handleDelete:g,handleEdit:N,handleSave:$,modalForm:c,modalFormRef:z}=j({name:"分类",initForm:{},doCreate:p.saveOrUpdateCategory,doDelete:p.deleteCategory,doUpdate:p.saveOrUpdateCategory,refresh:()=>{var a;return(a=o.value)==null?void 0:a.handleSearch()}}),U=[{type:"selection",width:15,fixed:"left"},{title:"分类名",key:"name",width:100,align:"center",ellipsis:{tooltip:!0}},{title:"文章量",key:"article_count",width:30,align:"center"},{title:"创建日期",key:"created_at",width:80,align:"center",render(a){return n(s,{size:"small",type:"text",ghost:!0},{default:()=>h(a.created_at),icon:f("mdi:clock-time-three-outline",{size:17})})}},{title:"更新日期",key:"updated_at",width:80,align:"center",render(a){return n(s,{size:"small",type:"text",ghost:!0},{default:()=>h(a.updated_at),icon:f("mdi:update",{size:18})})}},{title:"操作",key:"actions",width:100,align:"center",fixed:"right",render(a){return[n(s,{size:"small",type:"primary",onClick:()=>N(a)},{default:()=>"编辑",icon:f("material-symbols:edit-outline",{size:16})}),n(P,{onPositiveClick:()=>g([a.id],!1)},{trigger:()=>n(s,{size:"small",type:"error",style:"margin-left: 15px;"},{default:()=>"删除",icon:f("material-symbols:delete-outline",{size:16})}),default:()=>n("div",{},"确定删除该分类吗?")})]}}];return(a,t)=>(F(),S(D,{title:"分类管理"},{action:r(()=>{var l;return[i(e(s),{type:"primary",secondary:"",onClick:t[0]||(t[0]=u=>{var d;return(d=o.value)==null?void 0:d.handleExport()})},{default:r(()=>[T,v(" 导出 ")]),_:1}),i(e(s),{type:"primary",onClick:e(C)},{default:r(()=>[A,v(" 新建分类 ")]),_:1},8,["onClick"]),i(e(s),{type:"error",disabled:!((l=o.value)!=null&&l.selections.length),onClick:t[1]||(t[1]=u=>{var d;return e(g)((d=o.value)==null?void 0:d.selections)})},{default:r(()=>[L,v(" 批量删除 ")]),_:1},8,["disabled"])]}),default:r(()=>[i(O,{ref_key:"$table",ref:o,"query-items":m.value,"onUpdate:queryItems":t[4]||(t[4]=l=>m.value=l),columns:U,"get-data":e(p).getCategorys},{queryBar:r(()=>[i(R,{label:"分类名","label-width":50},{default:r(()=>[i(e(k),{value:m.value.keyword,"onUpdate:value":t[2]||(t[2]=l=>m.value.keyword=l),clearable:"",type:"text",placeholder:"请输入分类名",onKeydown:t[3]||(t[3]=B(l=>{var u;return(u=o.value)==null?void 0:u.handleSearch()},["enter"]))},null,8,["value"])]),_:1})]),_:1},8,["query-items","get-data"]),i(V,{visible:e(y),"onUpdate:visible":t[6]||(t[6]=l=>I(y)?y.value=l:null),title:e(x),loading:e(w),onSave:e($)},{default:r(()=>[i(e(E),{ref_key:"modalFormRef",ref:z,"label-placement":"left","label-align":"left","label-width":80,model:e(c)},{default:r(()=>[i(e(K),{label:"文章分类",path:"name",rule:{required:!0,message:"请输入分类名称",trigger:["input","blur"]}},{default:r(()=>[i(e(k),{value:e(c).name,"onUpdate:value":t[5]||(t[5]=l=>e(c).name=l),placeholder:"请输入分类名称",clearable:""},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["visible","title","loading","onSave"])]),_:1}))}});export{se as default};
