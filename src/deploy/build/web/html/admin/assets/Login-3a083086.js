var p=(v,_,r)=>new Promise((f,d)=>{var i=e=>{try{u(r.next(e))}catch(l){d(l)}},t=e=>{try{u(r.throw(e))}catch(l){d(l)}},u=e=>e.done?f(e.value):Promise.resolve(e.value).then(i,t);u((r=r.apply(v,_)).next())});import{e as R,f as T,g as E,h as q,r as x,l as w,i as S,o as A,c as B,w as I,n as P,u as c,d as s,b,t as D,a as g,j as U,N as j,_ as L,k as $,s as Q,m as K}from"./index-f53dfd2d.js";import{_ as O}from"./AppPage-64321f57.js";import{N as k}from"./Input-d1b207b8.js";import{N as V}from"./Checkbox-23248bff.js";const H="/admin/assets/login_banner-6e96327c.webp",W="/admin/assets/login_bg-ed2739b3.webp",z={QQ_APP_ID:"101878726",QQ_REDIRECT_URI:"https://www.talkxj.com/oauth/login/qq",WEIBO_APP_ID:"4039197195",WEIBO_REDIRECT_URI:"https://www.talkxj.com/oauth/login/weibo",TENCENT_CAPTCHA:"2088053498"},G={style:{transform:"translateY(25px)"},class:"m-auto max-w-700 min-w-345 flex items-center justify-center rounded-10 bg-white bg-opacity-60 p-15 shadow"},J=s("div",{class:"hidden w-380 px-20 py-35 md:block"},[s("img",{src:H,class:"w-full",alt:"login_banner"})],-1),Y={class:"w-320 flex flex-col px-20 py-35"},F={class:"flex items-center justify-center text-24 font-normal text-gray"},M=s("img",{src:L,alt:"logo",class:"mr-10 h-50 w-50"},null,-1),X={class:"mt-30"},Z={class:"mt-30"},ee={class:"mt-20"},se={class:"mt-20"},ce={__name:"Login",setup(v){const _="Gin Blog Admin",r=R(),f=T(),d=E(),{query:i}=q(),t=x({username:"test@qq.com",password:"11111"});u();function u(){const a=w.get("loginInfo");a&&(t.value={username:a.username||"test@qq.com",password:a.password||"11111"})}const e=S("isRemember",!1),l=x(!1);function y(){return p(this,null,function*(){const{username:a,password:o}=t.value;if(!a||!o){$message.warning("请输入用户名和密码");return}const n=(h,m)=>p(this,null,function*(){l.value=!0,$message.loading("正在验证...");try{const N=yield $.login({username:h,password:m});if(Q(N.data.token),$message.success("登录成功"),yield r.getUserInfo(),yield f.getBlogInfo(),e?w.set("loginInfo",{username:h,password:m}):w.remove("loginInfo"),yield K(),i.redirect){const C=i.redirect;Reflect.deleteProperty(i,"redirect"),d.push({path:C,query:i})}else d.push("/")}finally{l.value=!1}});JSON.parse("false")?new TencentCaptcha(z.TENCENT_CAPTCHA,m=>p(this,null,function*(){return m.ret===0&&n(a,o)})).show():n(a,o)})}return(a,o)=>(A(),B(O,{class:"bg-cover",style:P({backgroundImage:`url(${c(W)})`})},{default:I(()=>[s("div",G,[J,s("div",Y,[s("h5",F,[M,b(" "+D(c(_)),1)]),s("div",X,[g(c(k),{value:t.value.username,"onUpdate:value":o[0]||(o[0]=n=>t.value.username=n),class:"autofocus h-50 items-center pl-10 text-16",placeholder:"test@qq.com",maxlength:20},null,8,["value"])]),s("div",Z,[g(c(k),{value:t.value.password,"onUpdate:value":o[1]||(o[1]=n=>t.value.password=n),class:"h-50 items-center pl-10 text-16",type:"password","show-password-on":"mousedown",placeholder:"11111",maxlength:20,onKeydown:U(y,["enter"])},null,8,["value","onKeydown"])]),s("div",ee,[g(c(V),{checked:c(e),label:"记住我","on-update:checked":n=>e.value=n},null,8,["checked","on-update:checked"])]),s("div",se,[g(c(j),{class:"h-50 w-full rounded-5 text-16",type:"primary",loading:l.value,onClick:y},{default:I(()=>[b(" 登录 ")]),_:1},8,["loading"])])])])]),_:1},8,["style"]))}};export{ce as default};
