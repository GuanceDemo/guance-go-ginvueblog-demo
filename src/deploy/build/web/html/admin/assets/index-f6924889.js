var m=(c,a,i)=>new Promise((n,e)=>{var s=r=>{try{o(i.next(r))}catch(l){e(l)}},p=r=>{try{o(i.throw(r))}catch(l){e(l)}},o=r=>r.done?n(r.value):Promise.resolve(r.value).then(s,p);o((i=i.apply(c,a)).next())});import{_ as g}from"./CommonPage-328ed173.js";import{_}from"./CrudTable-e7ebf5b4.js";import{r as h,p as y,o as k,c as w,w as b,a as x,u as v,k as d,v as t,B as N,x as $,y as u,N as f}from"./index-f53dfd2d.js";import{N as z}from"./Image-3871d8d9.js";import{N as B}from"./Popconfirm-7d90b5a9.js";import"./AppPage-64321f57.js";import"./Space-fc8792cb.js";import"./Input-d1b207b8.js";import"./RadioGroup-373382a0.js";import"./get-slot-1efb97e5.js";import"./Checkbox-23248bff.js";import"./Forward-fc22679e.js";import"./utils-faaa8f65.js";const G=Object.assign({name:"在线用户"},{__name:"index",setup(c){const a=h(null);y(()=>{var e;(e=a.value)==null||e.handleSearch()});const i=[{title:"头像",key:"avatar",width:50,align:"center",render(e){return t(z,{height:50,imgProps:{style:{"border-radius":"3px"}},src:N(e.avatar),"fallback-src":"http://dummyimage.com/400x400","show-toolbar-tooltip":!0})}},{title:"昵称",key:"nickname",width:60,align:"center",ellipsis:{tooltip:!0}},{title:"登录 IP",key:"ip_address",width:70,align:"center",ellipsis:{tooltip:!0},render(e){return t("span",e.ip_address||"未知")}},{title:"登录地址",key:"ip_source",width:70,align:"center",ellipsis:{tooltip:!0},render(e){return t("span",e.ip_source||"未知")}},{title:"登录浏览器",key:"browser",width:70,align:"center",ellipsis:{tooltip:!0},render(e){return t("span",e.browser||"未知")}},{title:"操作系统",key:"os",width:70,align:"center",ellipsis:{tooltip:!0},render(e){return t("span",e.os||"未知")}},{title:"登录时间",key:"last_login_time",align:"center",width:70,render(e){return t(f,{size:"small",type:"text",ghost:!0},{default:()=>$(e.last_login_time),icon:u("mdi:update",{size:18})})}},{title:"操作",key:"actions",width:60,align:"center",fixed:"right",render(e){return t(B,{onPositiveClick:()=>n(e)},{trigger:()=>t(f,{size:"small",type:"primary"},{default:()=>"下线",icon:u("material-symbols:delete-outline",{size:16})}),default:()=>t("div",{},"确定强制该用户下线吗?")})}}];function n(e){return m(this,null,function*(){var s;try{yield d.forceOfflineUser(e),$message.success("该用户已被强制下线!"),(s=a.value)==null||s.handleSearch()}catch(p){$message.error("强制下线失败!")}})}return(e,s)=>(k(),w(g,{title:"在线用户"},{default:b(()=>[x(_,{ref_key:"$table",ref:a,columns:i,"get-data":v(d).getOnlineUsers},null,8,["get-data"])]),_:1}))}});export{G as default};
